<!doctype html>
<!--[if lt IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie6" class="ie ie-old" lang="fr-FR"><![endif]-->
<!--[if IE 7 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie7" class="ie ie-old" lang="fr-FR"><![endif]-->
<!--[if IE 8 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie8" class="ie ie-old" lang="fr-FR"><![endif]-->
<!--[if IE 9 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie9" class="ie" lang="fr-FR"><![endif]-->
<!--[if gt IE 9]><!--><html itemscope itemtype="http://schema.org/Organization" lang="fr-FR"><!--<![endif]-->
<head>

    <!-- Meta -->
    <meta charset="utf-8">
    <title>Drone | Expériences Ondes Wifi</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="Expériences Ondes Wifi | Expériences Ondes Wifi" href="https://gallexis.github.io/wifi-project/feed.xml">
    <link rel="alternate" type="application/atom+xml" title="Expériences Ondes Wifi | Expériences Ondes Wifi" href="https://gallexis.github.io/wifi-project/atom.xml">

    <!-- Favicons -->
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://github.com/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://github.com/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://github.com/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://github.com/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://github.com/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://github.com/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://github.com/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://github.com/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://github.com/apple-touch-icon-180x180.png">

    <meta name="application-name" content="Expériences Ondes Wifi">
    <meta name="msapplication-TileColor" content="#ffffff">


    <!-- Fonts -->
    <link rel="stylesheet" href="https://gallexis.github.io/wifi-project/css/css.css">
    <link rel="stylesheet" href="https://gallexis.github.io/wifi-project/css/font-awesome.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="https://gallexis.github.io/wifi-project/css/style.css">
    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://gallexis.github.io/wifi-project/js/respond.min.js"></script>
    <![endif]-->

</head>
<body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://gallexis.github.io/wifi-project"><i class="fa fa-wifi"></i> Expériences Ondes Wifi</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    
                        <li>
                            <a  href="https://gallexis.github.io/wifi-project/"></a>
                        </li>
                    
                        <li>
                            <a  style="color:white" 
                             href="https://gallexis.github.io/wifi-project/drone">Drone</a>
                        </li>
                    
                        <li>
                            <a  href="https://gallexis.github.io/wifi-project/go-pro">Go-Pro</a>
                        </li>
                    
                        <li>
                            <a  href="https://gallexis.github.io/wifi-project/rapport">Rapport</a>
                        </li>
                    
                </ul>
            </div>
        </div>
    </nav>




    <div class="container">
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                	<h1>Expériences du drone</h1>

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne">
        <h4 class="panel-title">
            <a class="collapsed exp1" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" >
            Expérience #1 - Meilleur cas possible
            </a>
        </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Environnement</b> de l'expérience: </td>
                        <td>Pièce de 10m2, aucun réseau wifi parasite</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Aucune</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>Qualité vidéo optimale</td>
                    </tr>
                </tbody>
            </table>

            <b>Puissance Max</b>: <span class="exp1max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp1min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp1avrg"> </span> dB

            <div id="exp1" data-values="[[0,-74],[19,-70],[30,-69],[49,0],[64,-71],[79,-68],[94,-70],[109,-72],[124,-70],[139,-66],[154,-70],[169,-70],[184,-70],[199,-72],[214,-64],[229,-72],[250,-70],[258,-68],[279,-69],[285,-69],[304,-71],[319,-69]]" ></div>

        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
        <h4 class="panel-title">
            <a class="collapsed exp2" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Expérience #2 - Perturbation: Distance (25m)
            </a>
        </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>25</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Distance de 25m (+ hauteur des herbes de 20cm )</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>Aucun obstacle entre le drone et le PC, le signal est ??dB plus faible que lors de conditions optimales.
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <b>Puissance Max</b>: <span class="exp2max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp2min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp2avrg"> </span> dB

            <div id="exp2" data-values="[[0,-60],[15,-61],[30,-64],[45,-59],[57,-57],[75,-54],[90,-55],[105,-64],[120,-56],[135,-61],[150,-55],[165,-58],[180,-55],[195,-57],[210,-62],[225,-63]]"></div>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingThree">
        <h4 class="panel-title">
            <a class="collapsed exp3" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Expérience #3 - Perturbation: Arbres (25m)
            </a>
        </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>25</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Présence d'une dizaine d'arbres entre le drone et le PC</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>Malgré la présence d'arbres, la qualité du signal vidéo était bonne. Cette expérience montre qu'avec uniquement le facteur "présence d'arbres", le signal est atténué d'en moyenne 10dB, donc les arbres diminuent la puissance du signal.</td>
                    </tr>
                </tbody>
            </table>

            <b>Puissance Max</b>: <span class="exp3max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp3min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp3avrg"> </span> dB

            <div id="exp3" data-values="[[0,-74],[19,-70],[30,-69],[49,-69],[64,-71],[79,-68],[94,-70],[109,-72],[124,-70],[139,-66],[154,-70],[169,-70],[184,-70],[199,-72],[214,-64],[229,-72],[250,-70],[258,-68],[279,-69],[285,-69],[304,-71],[319,-69]]"></div>

        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingFour">
        <h4 class="panel-title">
            <a class="collapsed exp4" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
            Expérience #4 - Perturbation: sol arrondi
            </a>
        </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>25</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Présence d'une dizaine d'arbres entre le drone et le PC</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>Malgré la présence d'arbres, la qualité du signal vidéo était bonne, on peut dire que les ondes ne sont pas génées par les arbres, et qu'elles passent à travers eux sans problème, ??? et rebondissent sur le sol (composé de terre) ???</td>
                    </tr>
                </tbody>
            </table>

            <b>Puissance Max</b>: <span class="exp4max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp4min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp4avrg"> </span>dB

            <div id="exp4" data-values="[[0,-70],[22,-60],[26,-60],[45,-72],[60,-63],[75,-66],[90,-64],[105,-74],[120,-63],[135,-74],[150,-70],[165,-75],[180,-74],[195,-67],[210,-67],[225,-64],[240,-61],[255,-72]]"></div>

        </div>
    </div>
</div>

<div id="allXp"></div>


<script type="text/javascript">

function average(array)
{
	var sum = 0
	var arrayLength = array.length

	for(var i in array)
	{
		sum += array[i][1]
	}

	// check if divide by 0
	try
	{
		return parseInt(sum / arrayLength)
	}
	catch(e)
	{
		console.log(e)
		return 0
	}
}

window.onload = function() {

	google.charts.load('current', {packages: ['corechart', 'line']});

	google.charts.setOnLoadCallback(function(){ drawChart('exp1') })
	google.charts.setOnLoadCallback(function(){ drawChart('exp2') })
	google.charts.setOnLoadCallback(function(){ drawChart('exp3') })
	google.charts.setOnLoadCallback(function(){ drawChart('exp4') })
	google.charts.setOnLoadCallback(function(){ drawCharts('allXp') })

	function drawChart(idXp) {
		var id = document.getElementById(idXp)
		var strValues = id.getAttribute('data-values');
		var parsedValues = JSON.parse(strValues)
		
		var data = new google.visualization.DataTable();
		data.addColumn('number', 'Puissance');
		data.addColumn('number', 'Exp ');

		data.addRows(parsedValues);

		var options = {
		hAxis: {
		  title: 'Temps (Secondes)'
		},
		vAxis: {
		  title: 'Puissance (dB)',
		  viewWindow:{
                max:0,
                min:-100
              }
		},
		width: 900,
		height: 500,
		};

		$('span.'+idXp+"max").text(data.getColumnRange(1).max);
		$('span.'+idXp+"min").text(data.getColumnRange(1).min);
		$('span.'+idXp+"avrg").text(average(parsedValues));

		var chart = new google.visualization.LineChart(id);
		chart.draw(data, options);
	}

	function drawCharts(idXp) {

		var id = document.getElementById(idXp)
		var values = [] 
		var sizeMinArray = []
		var newValues = []
		var tmp = []


		var data = new google.visualization.DataTable();
		data.addColumn('number', 'Puissance');

		$('[id^=exp]').each(function() {
			arrayValues = JSON.parse(document.getElementById(this.id).getAttribute('data-values'))
    		values.push(arrayValues)
    		data.addColumn('number', $("."+this.id).text().replace("Expérience ","") + "- Moyenne: "+average(arrayValues)+" dB - " + "("+$('span.'+this.id+"max").text()+","+$('span.'+this.id+"min").text()+")dB");
		});

		// Get the smallest size of an array
		for (var i in values)
		{
			sizeMinArray.push(values[i].length)
		}

		// create new array to display every values of every arrays
		for(var i =0; i< Math.min.apply( Math, sizeMinArray ); i++)
		{
			var time = values[0][i][0]
			for(var j in values)
			{
				tmp.push(values[j][i][1])
			}
			tmp.unshift(time)
			newValues.push(tmp)
			tmp = []
		}

		//console.log(newValues)

		data.addRows(newValues);

		var options = {
			chartArea:{left:"7%"},
		hAxis: {
		  title: 'Temps (Secondes)'
		},
		vAxis: {
		  title: 'Puissance (dB)',
		  viewWindow:{
                max:0,
                min:-100
              }
		},
		width: 1000,
		height: 700,

		};

		var chart = new google.visualization.LineChart(id);
		chart.draw(data, options);
	}

};
</script>

            </div>
        </div>
    </div>


    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p class="text-muted">&copy; 2016 - Université Pierre et Marie Curie.</p>
                </div>
            </div>
        </div>
    </footer>


    <!-- JavaScript -->
    <script src="https://gallexis.github.io/wifi-project/js/jquery.min.js"></script>
    <script src="https://gallexis.github.io/wifi-project/js/bootstrap.min.js"></script>
    <script src="https://gallexis.github.io/wifi-project/js/power.js"></script>
    <script src="https://gallexis.github.io/wifi-project/js/charts-loader.js"></script>

    </body>
</html>