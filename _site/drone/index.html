<!doctype html>
<!--[if lt IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie6" class="ie ie-old" lang="fr-FR"><![endif]-->
<!--[if IE 7 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie7" class="ie ie-old" lang="fr-FR"><![endif]-->
<!--[if IE 8 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie8" class="ie ie-old" lang="fr-FR"><![endif]-->
<!--[if IE 9 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie9" class="ie" lang="fr-FR"><![endif]-->
<!--[if gt IE 9]><!--><html itemscope itemtype="http://schema.org/Organization" lang="fr-FR"><!--<![endif]-->
<head>

    <!-- Meta -->
    <meta charset="utf-8">
    <title>Drone | Expériences Ondes Wifi</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="Expériences Ondes Wifi | Expériences Ondes Wifi" href="https://gallexis.github.io/wifi-project/feed.xml">
    <link rel="alternate" type="application/atom+xml" title="Expériences Ondes Wifi | Expériences Ondes Wifi" href="https://gallexis.github.io/wifi-project/atom.xml">

    <!-- Favicons -->
    <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="57x57" href="https://github.com/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="https://github.com/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="https://github.com/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="https://github.com/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="https://github.com/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="https://github.com/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="https://github.com/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="https://github.com/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://github.com/apple-touch-icon-180x180.png">

    <meta name="application-name" content="Expériences Ondes Wifi">
    <meta name="msapplication-TileColor" content="#ffffff">


    <!-- Fonts -->
    <link rel="stylesheet" href="https://gallexis.github.io/wifi-project/css/css.css">
    <link rel="stylesheet" href="https://gallexis.github.io/wifi-project/css/font-awesome.min.css">

    <!-- Styles -->
    <link rel="stylesheet" href="https://gallexis.github.io/wifi-project/css/style.css">
    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://gallexis.github.io/wifi-project/js/respond.min.js"></script>
    <![endif]-->

</head>
<body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://gallexis.github.io/wifi-project"><i class="fa fa-wifi"></i> Expériences Ondes Wifi</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    
                        <li>
                            <a  href="https://gallexis.github.io/wifi-project/"></a>
                        </li>
                    
                        <li>
                            <a  style="color:white" 
                             href="https://gallexis.github.io/wifi-project/drone">Drone</a>
                        </li>
                    
                        <li>
                            <a  href="https://gallexis.github.io/wifi-project/go-pro">Go-Pro</a>
                        </li>
                    
                        <li>
                            <a  href="https://gallexis.github.io/wifi-project/rapport">Rapport</a>
                        </li>
                    
                </ul>
            </div>
        </div>
    </nav>




    <div class="container">
        <div class="row">
            <div class="col-md-10 col-md-offset-1">
                <div class="title-group">

    <h1 class="special">
        <span>
        
            Expériences du drone
        
        </span>
    </h1>
</div>


<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne">
        <h4 class="panel-title">
            <a class="collapsed exp1" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" >
            Expérience #1 - Meilleur cas possible
            </a>
        </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Environnement</b> de l'expérience: </td>
                        <td>Pièce de 15m2, aucun réseau wifi parasite</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>0,5</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Aucune</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>Qualité vidéo optimale: pas de saccade</td>
                    </tr>
                </tbody>
            </table>

            <b>Puissance Max</b>: <span class="exp1max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp1min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp1avrg"> </span> dB

            <div id="exp1" data-values="[[0,-30],[20,-29],[30,-30],[48,-30],[63,-29],[78,-31],[93,-31],[108,-29],[123,-30],[138,-31],[153,-29],[168,-29],[183,-29],[198,-33],[213,-31],[228,-31],[243,-32],[258,-31],[273,-31],[288,-33]]" ></div>

        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
        <h4 class="panel-title">
            <a class="collapsed exp2" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Expérience #2 - Perturbation: Distance (25m)
            </a>
        </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>25</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Distance de 25m </td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>Qualité vidéo optimale, comparable avec l’expérience de référence, mais les résultats de l’analyse de la puissance du wifi indiquent une perte moyenne de 28dB, que l'on incombe à distance.
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <b>Puissance Max</b>: <span class="exp2max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp2min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp2avrg"> </span> dB

            <div id="exp2" data-values="[[0,-60],[15,-61],[30,-64],[45,-59],[57,-57],[75,-54],[90,-55],[105,-64],[120,-56],[135,-61],[150,-55],[165,-58],[180,-55],[195,-57],[210,-62],[225,-63]]"></div>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingThree">
        <h4 class="panel-title">
            <a class="collapsed exp3" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Expérience #3 - Perturbation: Arbres (25m)
            </a>
        </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>25</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Présence d'une dizaine d'arbres entre le drone et le PC</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>
                            Qualité vidéo optimale, comparable avec l’expérience précédente (distance de 25m).
                            Néanmoins, nous avons observé une atténuation de 10dB, qui est probablement due à l'absoption et réflexion des ondes wifi par les arbres.
                        </td>
                    </tr>
                </tbody>
            </table>

            <b>Puissance Max</b>: <span class="exp3max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp3min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp3avrg"> </span> dB

            <div id="exp3" data-values="[[0,-74],[19,-70],[30,-69],[49,-69],[64,-71],[79,-68],[94,-70],[109,-72],[124,-70],[139,-66],[154,-70],[169,-70],[184,-70],[199,-72],[214,-64],[229,-72],[250,-70],[258,-68],[279,-69],[285,-69],[304,-71],[319,-69]]"></div>

        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingFour">
        <h4 class="panel-title">
            <a class="collapsed exp4" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
            Expérience #4 - Perturbation: sol arrondi
            </a>
        </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Non</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>/</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>25</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>Présence d'une dizaine d'arbres entre le drone et le PC</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>La qualité vidéo reste comparable aux expériences précédentes.
                            Cependant, la puissance du signal, malgré les conditions idéales, sont mauvaises et comparables à l'expérience à distance 25 avec des arbres.<br />
                            Nous avons pour hypothèse que la proximité entre le drone et le sol fait que les ondes sont absorbées ou pas suffisamment réfléchies pour être récupérées par le smartphone, ou que le sol contient des matériaux qui réfléchissent les ondes dans différentes directions.
                        </td>
                    </tr>
                </tbody>
            </table>

            <b>Puissance Max</b>: <span class="exp4max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp4min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp4avrg"> </span>dB

            <div id="exp4" data-values="[[0,-70],[22,-60],[26,-60],[45,-72],[60,-63],[75,-66],[90,-64],[105,-74],[120,-63],[135,-74],[150,-70],[165,-75],[180,-74],[195,-67],[210,-67],[225,-64],[240,-61],[255,-72]]"></div>

        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingFive">
        <h4 class="panel-title">
            <a class="collapsed exp5" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive" >
            Expérience #5 - Situation de vol
            </a>
        </h4>
    </div>
    <div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
        <div class="panel-body">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Détails sur l'expérience</th>
                        <th> </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Le drone <b>volait</b>-il pendant l'expérience?</td>
                        <td>Oui</td>
                    </tr>
                    <tr>
                        <td> <b>Commandes de vol</b> non/mal suivies?</td>
                        <td>Aucun problème</td>
                    </tr>
                    <tr>
                        <td> <b>Environnement</b> de l'expérience: </td>
                        <td>Cours de 100m2</td>
                    </tr>
                    <tr>
                        <td> <b>Distance</b> entre le drone et téléphone/PC (en mètres): </td>
                        <td>Une vingtaine de mètres</td>
                    </tr>
                    <tr>
                        <td> <b>Hauteur</b> entre le drone/PC et le sol (en mètres): </td>
                        <td>1 à 3</td>
                    </tr>
                    <tr>
                        <td> <b>Canal wifi</b> Drone/PC </td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td> <b>Perturbation</b> utilisée: </td>
                        <td>2 réseaux wifi environnants</td>
                    </tr>
                    <tr>
                        <td> <b>Désynchronisation</b> constatée (arrêt de la connexion wifi) ? </td>
                        <td>Non</td>
                    </tr>

                    <tr>
                        <td> <b>Observation(s)/Remarque(s) </b> ?</td>
                        <td>Le flux vidéo reçu sur smartphone est de qualité équivalente à celle de l’expérience 1. Lorsque le drone est en vol, la qualité de la vidéo est satisfaisante et aucun problème n’est à signaler. Le signal reçu est de -57dB en moyenne, soit équivalent à l’expérience en champ libre à 25m de distance. Les deux réseaux wifi parasites, les murs et le sol en goudron n’ont pas altéré la qualité de la communication.
                        </td>
                    </tr>
                </tbody>
            </table>

            <b>Puissance Max</b>: <span class="exp5max"> </span>dB <br />
            <b>Puissance Min</b>: <span class="exp5min"> </span>dB <br />
            <b>Moyenne</b>: <span class="exp5avrg"> </span> dB

            <div id="exp5" data-values="[[0,-54],[15,-52],[30,-54],[45,-58],[60,-55],[75,-62],[90,-51],[105,-55],[120,-67],[135,-63]]" ></div>

        </div>
    </div>
</div>



<h3>Vue d'ensemble</h3>
<div id="allXp"> &nbsp;</div>




<h2>Protocole de tests - AR.Drone</h2>

<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne2">
        <h4 class="panel-title">
            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne2" aria-expanded="false" aria-controls="collapseOne2">
            Protocole
            </a>
        </h4>
    </div>
    <div id="collapseOne2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne2">
        <div class="panel-body">
            
			<ol>
			  	<li>  

			  		<br /> 
			  		- Ouvrir Wireshark <br />
					- Ouvrir iStumbler <br />
					- Ouvrir programme python 
				</li>

			  	<li> 
			  		<br /> 
			  		- Mettre la batterie dans le drone & attendre que les voyants s'allument
			  	</li>

			  	<li> 
			  		<br /> 
			  		- Se connecter au réseau du drone
			  	</li>

			  	<li> 
			  		<br /> 
			  		- Lancer wireshark <br />
					- Lancer iStumbler
				</li>
			  
			  	<li> 
			  		<br /> 
			  		- Exécuter programme python <br />
					- Faire décoller le drone
				</li>

			  	<li> 
			  		<br /> 
			  		- Attendre 4 à 5min
			  	</li>

			  	<li> 
			  		<br /> 
			  		- Faire atterir le drone <br />
					- Quitter le programme python
				</li>

			  	<li> 
			  		<br /> 
			  		- Stopper wireshark <br />
					- Stopper iStumbler
				</li>

			  	<li> 
			  		<br /> 
			  		- Enregistrer les logs iStumbler & Wireshark
			  	</li>

			  	<li> 
			  		<br /> 
			  		- Ajouter les logs, commentaires et détails de l'experience dans un nouveau dossier
				</li>
			</ol>


        </div>
    </div>
</div>



<h2>Code Parseur - Python</h2>

<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo2">
        <h4 class="panel-title">
            <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo2" aria-expanded="false" aria-controls="collapseTwo2">
            Code
            </a>
        </h4>
    </div>
    <div id="collapseTwo2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo2">
        <div class="panel-body">
            

			<figure class="highlight"><pre><code class="language-python" data-lang="python"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre></td><td class="code"><pre>			<span class="k">def</span> <span class="nf">HMS_to_seconds</span><span class="p">(</span><span class="n">time</span><span class="p">):</span>
			    <span class="n">time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">':'</span><span class="p">)</span>
			    <span class="n">time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">*</span><span class="mi">3600</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">*</span><span class="mi">60</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

			    <span class="k">return</span> <span class="n">time</span>

			<span class="k">def</span> <span class="nf">calculate_elapsed_time</span><span class="p">(</span><span class="n">initial</span><span class="p">,</span><span class="n">current</span><span class="p">):</span>
			    <span class="k">return</span> <span class="n">current</span><span class="o">-</span><span class="n">initial</span>

			<span class="k">def</span> <span class="nf">parse_log</span><span class="p">(</span><span class="n">file_name</span><span class="p">):</span>
			    <span class="n">parsed_lines</span> <span class="o">=</span> <span class="p">[]</span>
			    <span class="n">start_time</span> <span class="o">=</span> <span class="mi">0</span>

			    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
			        <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

			    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
			        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">','</span><span class="p">)</span>

			        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s">"ardrone_086188"</span><span class="p">:</span>
			            <span class="k">continue</span>

			        <span class="n">signal</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
			        <span class="n">time</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">' '</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

			        <span class="k">if</span> <span class="n">start_time</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
			            <span class="n">start_time</span> <span class="o">=</span> <span class="n">HMS_to_seconds</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
			            <span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
			        <span class="k">else</span><span class="p">:</span>
			            <span class="n">time</span> <span class="o">=</span> <span class="n">calculate_elapsed_time</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span><span class="n">HMS_to_seconds</span><span class="p">(</span><span class="n">time</span><span class="p">))</span>

			        <span class="n">parsed_line</span> <span class="o">=</span> <span class="p">{</span><span class="s">"time"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">),</span> <span class="s">"signal"</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">signal</span><span class="p">)}</span>
			        <span class="n">parsed_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parsed_line</span><span class="p">)</span>

			    <span class="k">return</span> <span class="n">parsed_lines</span>


			<span class="k">def</span> <span class="nf">convert_to_graphStruct</span><span class="p">(</span><span class="n">parsed_lines</span><span class="p">):</span>
			    <span class="n">graph_lines</span> <span class="o">=</span> <span class="s">"["</span>

			    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">parsed_lines</span><span class="p">:</span>
			        <span class="n">graph_lines</span> <span class="o">+=</span>  <span class="s">"["</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="s">"time"</span><span class="p">]</span> <span class="o">+</span> <span class="s">","</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="s">"signal"</span><span class="p">]</span> <span class="o">+</span> <span class="s">"],"</span>

			    <span class="n">graph_lines</span> <span class="o">=</span> <span class="n">graph_lines</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
			    <span class="n">graph_lines</span> <span class="o">+=</span> <span class="s">"]"</span>

			    <span class="k">print</span><span class="p">(</span><span class="n">graph_lines</span><span class="p">)</span>



			<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>

			    <span class="n">file_name</span> <span class="o">=</span> <span class="s">"/Users/alexisgallepe/Desktop/log.txt"</span>
			    <span class="n">parsed_lines</span> <span class="o">=</span> <span class="n">parse_log</span><span class="p">(</span><span class="n">file_name</span><span class="p">)</span>
			    <span class="n">convert_to_graphStruct</span><span class="p">(</span><span class="n">parsed_lines</span><span class="p">)</span>

			<span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

        </div>
    </div>
</div>


</div>






<script type="text/javascript">

function average(array)
{
	var sum = 0
	var arrayLength = array.length

	for(var i in array)
	{
		sum += array[i][1]
	}

	// check if divide by 0
	try
	{
		return parseInt(sum / arrayLength)
	}
	catch(e)
	{
		console.log(e)
		return 0
	}
}

function toMultiLines(array)
{
	var sizeArrays = []
    var sizeMaxArrays = 0
	var newValues = []
	var tmp = []
    var time = 0

	// Get the biggest size of an array
	for (var i in array)
	{
		sizeArrays.push(array[i].length)
	}

    sizeMaxArrays = Math.max.apply( Math, sizeArrays )

	// create new array to display every values of every arrays
	for(var i =0; i< sizeMaxArrays; i++)
	{
		
		for(var j in array)
		{
            if(array[j].length == sizeMaxArrays)
                time = array[j][i][0]

            try
            {
                tmp.push(array[j][i][1])
            }
            catch(e)
            {
                tmp.push(null)
            }
		}

		tmp.unshift(time)
		newValues.push(tmp)
		tmp = []
	}
	return newValues
}

window.onload = function() {

	google.charts.load('current', {packages: ['corechart', 'line']});

    google.charts.setOnLoadCallback(function(){ drawChart("exp1") })
    google.charts.setOnLoadCallback(function(){ drawChart("exp2") })
    google.charts.setOnLoadCallback(function(){ drawChart("exp3") })
    google.charts.setOnLoadCallback(function(){ drawChart("exp4") })
    google.charts.setOnLoadCallback(function(){ drawChart("exp5") })
    
    google.charts.setOnLoadCallback(function(){ drawChartOfAllExperiences('allXp') })

	function drawChart(idXp) {

		var id = document.getElementById(idXp)
		var strValues = id.getAttribute('data-values');
		var parsedValues = JSON.parse(strValues)
		
		var data = new google.visualization.DataTable();
		data.addColumn('number', 'Puissance');
		data.addColumn('number', 'Exp ');

		data.addRows(parsedValues);

		var options = {
		hAxis: {
		  title: 'Temps (Secondes)'
		},
		vAxis: {
		  title: 'Puissance (dB)',
		  viewWindow:{
                max:0,
                min:-100
              }
		},
		width: 900,
		height: 500,
		};

		$('span.'+idXp+"max").text(data.getColumnRange(1).max);
		$('span.'+idXp+"min").text(data.getColumnRange(1).min);
		$('span.'+idXp+"avrg").text(average(parsedValues));

		var chart = new google.visualization.LineChart(id);
		chart.draw(data, options);

	}

	function drawChartOfAllExperiences(idXp) {

		var id = document.getElementById(idXp)
		var values = [] 

		var data = new google.visualization.DataTable();
		data.addColumn('number', 'Puissance');

		// Get the values frome every everiences
		$('[id^=exp]').each(function() {
			arrayValues = JSON.parse(document.getElementById(this.id).getAttribute('data-values'))
    		values.push(arrayValues)

    		data.addColumn('number', 
    					$("."+this.id).text().replace("Expérience ","") + 
    					"- Moyenne: "+$('span.'+this.id+"avrg").text()+" dB - " +
    					"("+$('span.'+this.id+"max").text()+","+
    					$('span.'+this.id+"min").text()+")dB");  
		});

		// toMultiLines() creates a new array for googleCharts to be able to
		// display a graph with others experiences data (multi-lines graph)
		data.addRows(toMultiLines(values));

		var options = {
		chartArea:{left:"7%",top:"2%",bottom:"15%"},
        interpolateNulls: false,
		hAxis: {
		  title: 'Temps (Secondes)'
		},
		vAxis: {
		  title: 'Puissance (dB)',
		  viewWindow:{
                max:0,
                min:-100
              }
		},
		width: 1000,
		height: 700,

		};

		var chart = new google.visualization.LineChart(id);
		chart.draw(data, options);
	}

};
</script>

            </div>
        </div>
    </div>


    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p class="text-muted">&copy; 2016 - Université Pierre et Marie Curie.</p>
                </div>
            </div>
        </div>
    </footer>


    <!-- JavaScript -->
    <script src="https://gallexis.github.io/wifi-project/js/jquery.min.js"></script>
    <script src="https://gallexis.github.io/wifi-project/js/bootstrap.min.js"></script>
    <script src="https://gallexis.github.io/wifi-project/js/power.js"></script>
    <script src="https://gallexis.github.io/wifi-project/js/charts-loader.js"></script>

    </body>
</html>